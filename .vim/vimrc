if has("win32")
    let g:python3_host_prog = 'C:\Users\Administrator\AppData\Local\Programs\Python\Python38\python.exe'
endif

" vim-plug {{{
call plug#begin('~/.vim/plugged')

Plug 'vim-airline/vim-airline'
Plug 'tpope/vim-surround'
Plug 'Raimondi/delimitMate'
Plug 'preservim/nerdtree'
Plug 'tpope/vim-commentary'
Plug 'terryma/vim-multiple-cursors'
Plug 'kana/vim-textobj-user'
Plug 'sgur/vim-textobj-parameter'
Plug 'kana/vim-textobj-entire'
Plug 'mhinz/vim-signify'
Plug 'voldikss/vim-translator'
Plug 'Chiel92/vim-autoformat'
Plug 'tpope/vim-fugitive'

" themes
Plug 'w0ng/vim-hybrid'
Plug 'joshdick/onedark.vim'
Plug 'rakr/vim-one'
Plug 'dracula/vim'
Plug 'morhetz/gruvbox'

call plug#end()
" }}}

" 常规设置 {{{
set hlsearch " 高亮搜索结果
set ignorecase " 搜索时忽略大小写
set incsearch " 每输入一个字符就跳转到对应的结果
set noerrorbells " 关闭错误响声
set clipboard+=unnamed " 使用系统剪切板
set splitbelow " 默认在下侧分屏
set t_Co=256 " 开启256颜色支持
set nowrap " 默认不启用拆行
set autoindent
set number
set tabstop=4
set shiftwidth=4
set expandtab
set softtabstop=4
set encoding=utf8
set fileencoding=utf-8
set fileencodings=ucs-bom,utf-8,gbk,utf-16,big5,gb18030,ISO-8859,latin1
syntax on
set fdm=marker " 使用marker折叠
set foldlevelstart=99 " 打开文件默认不折叠
" }}}

" airline {{{
set laststatus=2
set ambiwidth=double
let g:airline_powerline_fonts=1
let g:airline_left_sep = ''
let g:airline_left_sep = ''
let g:airline_right_sep = ''
let g:airline_right_sep = ''
" }}}

" vim-signify {{{
set updatetime=100 " 设置vim更新时间，主要用于更新gitgutter
" }}}

" vim-textobj-parameter {{{
let g:vim_textobj_parameter_mapping = 'a'
" }}}

" 按键映射 {{{
let mapleader=" " " 设置空格键为leader
nnoremap ` ^
nnoremap <silent> <leader>e :NERDTreeToggle<CR>
nnoremap <silent> <leader>f :NERDTreeFind<CR>
" 为了支持win+v
imap <C-V> <ESC>"+gpa
" }}}

" 光标设置 {{{
" https://vim.fandom.com/wiki/Configuring_the_cursor
" 1 or 0 -> blinking block
" 2 solid block
" 3 -> blinking underscore
" 4 solid underscore
" Recent versions of xterm (282 or above) also support
" 5 -> blinking vertical bar
" 6 -> solid vertical bar

if &term =~ '^xterm'
    " normal mode
    let &t_EI .= "\<Esc>[8 q"
    " insert mode
    let &t_SI .= "\<Esc>[6 q"
endif
" }}}

" gVim {{{
if has("gui_running")
    " au GUIEnter * simalt ~x " 窗口启动时自动最大化
    set guioptions-=m " 隐藏菜单栏
    set guioptions-=T " 隐藏工具栏
    set guioptions-=L " 隐藏左侧滚动条
    set guioptions-=r " 隐藏右侧滚动条
    set guioptions-=b " 隐藏底部滚动条
    set lines=33
    set columns=110
    winpos 440 200
    source $VIMRUNTIME/delmenu.vim
    source $VIMRUNTIME/menu.vim
    command Wsl :ter C:\Windows\Sysnative\wsl.exe
    " Windows下使用wsl作为默认终端
    " if has("win32")
    "   set shell=C:\Windows\Sysnative\wsl.exe
    "   set shellpipe=|
    "   set shellredir=>
    "   set shellcmdflag=
    " endif

    " Windows下使用ctrl v粘贴
    nmap <C-V> "+gP
endif
" }}}

" 主题配置 {{{
set guifont=consolas:h13
colorscheme gruvbox
set bg=dark
" }}}

" vim-translator {{{
" Echo translation in the cmdline
nmap <silent> <Leader>s <Plug>Translate
vmap <silent> <Leader>s <Plug>TranslateV
" Display translation in a window
nmap <silent> <Leader>w <Plug>TranslateW
vmap <silent> <Leader>w <Plug>TranslateWV
" Replace the text with translation
" nmap <silent> <Leader>r <Plug>TranslateR
" vmap <silent> <Leader>r <Plug>TranslateRV
" }}}
